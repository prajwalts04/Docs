<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Upload PDF</title>

<style>
body {
  margin: 0;
  background: #f2f5ff;
  font-family: Arial;
}

.container {
  max-width: 450px;
  background: white;
  margin: 20px auto;
  padding: 20px;
  border-radius: 14px;
  box-shadow: 0 4px 18px rgba(0,0,0,0.15);
}

h2 {
  text-align: center;
  color: #0047b3;
}

label { font-weight: bold; }

input {
  width: 100%;
  padding: 12px;
  border-radius: 10px;
  border: 1px solid #b7c4e6;
  margin-top: 6px;
  margin-bottom: 10px;
  font-size: 16px;
}

button {
  width: 100%;
  padding: 14px;
  background: #0055ff;
  color: white;
  font-size: 18px;
  border-radius: 10px;
  border: none;
  font-weight: bold;
}

button:disabled {
  background: #aabbff;
}

.error {
  color: red;
  font-size: 14px;
  display: none;
}

#progressArea {
  display: none;
  margin-top: 20px;
}

.progressBg {
  width: 100%;
  background: #e0e6ff;
  height: 15px;
  border-radius: 8px;
}

#progressBar {
  width: 0%;
  height: 15px;
  background: #00b347;
  border-radius: 8px;
  transition: width 0.23s ease;
}

#statusText {
  text-align: center;
  margin-top: 10px;
  font-weight: bold;
  color: #003d99;
}

#msg {
  text-align: center;
  margin-top: 14px;
  font-weight: bold;
  color: green;
}
</style>

</head>
<body>

<div class="container">

<h2>Upload Your PDF</h2>

<label>Your Name *</label>
<input id="name" type="text" oninput="check()">
<div id="nameErr" class="error">Name is required</div>

<label>Contact Number *</label>
<input id="contact" type="text" oninput="check()">
<div id="contactErr" class="error">Contact number is required</div>

<label>Select PDF *</label>
<input id="file" type="file" accept="application/pdf" onchange="check()">

<button id="uploadBtn" disabled onclick="upload()">Upload PDF</button>

<div id="progressArea">
  <div class="progressBg">
    <div id="progressBar"></div>
  </div>
  <div id="statusText">Uploading...</div>
</div>

<div id="msg"></div>

</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbyn6zw19HiWmt58b4YTOhN28lNU9s13cel0BnAEHHztSBzjSuTfuN6R5p34BEtsyIOTqA/exec";

function check() {
  const name = document.getElementById("name").value.trim();
  const contact = document.getElementById("contact").value.trim();
  const file = document.getElementById("file").files.length;

  document.getElementById("nameErr").style.display = name ? "none" : "block";
  document.getElementById("contactErr").style.display = contact ? "none" : "block";

  document.getElementById("uploadBtn").disabled = !(name && contact && file);
}

async function upload() {
  const name = document.getElementById("name").value.trim();
  const contact = document.getElementById("contact").value.trim();
  const file = document.getElementById("file").files[0];

  document.getElementById("progressArea").style.display = "block";

  let progress = 0;
  let fake = setInterval(() => {
    progress = Math.min(progress + Math.random() * 10, 90);
    document.getElementById("progressBar").style.width = progress + "%";
    document.getElementById("statusText").innerText = "Uploading... " + Math.round(progress) + "%";
    if (progress >= 90) clearInterval(fake);
  }, 200);

  const base64 = await toBase64(file);

  fetch(scriptURL, {
    method: "POST",
    body: JSON.stringify({
      name: name,
      contact: contact,
      file: base64
    })
  })
  .then(res => res.text())
  .then(msg => {
    document.getElementById("progressBar").style.width = "100%";
    document.getElementById("statusText").innerText = "Done ✔";
    document.getElementById("msg").innerHTML = msg;
  })
  .catch(err => {
    document.getElementById("msg").innerHTML = "Upload Failed ❌<br>" + err;
  });
}

function toBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result.split(",")[1]);
    reader.readAsDataURL(file);
  });
}
</script>

</body>
</html>
